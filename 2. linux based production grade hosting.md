Perfect! à¦†à¦®à¦¿ `.md` documentationà¦Ÿà¦¾ à¦¤à§‹à¦®à¦¾à¦° VM IP `192.168.121.220/24` à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§‡ update à¦•à¦°à§‡ à¦¦à¦¿à¦²à¦¾à¦®à¥¤

---

# ğŸš€ Production-Ready Deployment of Go-Todo on Linux VM (Vagrant + Docker Compose)

This documentation provides a **step-by-step guide** to deploying the **Go-Todo Application** on a Linux-based Virtual Machine using **Vagrant, Docker, and Docker Compose**.

The setup ensures:

* **Isolated containers** for backend, frontend, database, and reverse proxy
* **Bridged network** for LAN access
* **Persistent MongoDB storage**
* **Production-ready Nginx reverse proxy**

---

## 1ï¸âƒ£ VM Provisioning with Vagrant

Create a `Vagrantfile` in your project root:

```ruby
Vagrant.configure("2") do |config|
  # Base Image
  config.vm.box = "generic/ubuntu2204"

  # VM Name
  config.vm.define "go-todo-vm"

  # VM Provider Settings (Libvirt)
  config.vm.provider :libvirt do |libvirt|
    libvirt.name = "go-todo-vm"
    libvirt.memory = 4096          # 4GB RAM
    libvirt.cpus = 2               # 2 CPU cores
  end

  # Bridged Network (LAN access)
  config.vm.network "public_network", dev: "wlp0s20f3"
end
```

---

## 2ï¸âƒ£ Launch VM & SSH

```bash
vagrant up
vagrant ssh
```

Check assigned IP:

```bash
ip a
```

**VM IP**: `192.168.121.220/24`

---

## 3ï¸âƒ£ Install Docker & Docker Compose

Inside the VM:

```bash
sudo apt update && sudo apt upgrade -y

# Install Docker
sudo apt install -y docker.io
sudo systemctl enable docker
sudo systemctl start docker

# Install Docker Compose v2
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
docker-compose --version
```

---

## 4ï¸âƒ£ Clone the Project Repository

```bash
cd ~
git clone https://github.com/SAYEM-16T/go-todo-v1.git
cd go-todo-v1
```

Project structure:

```
go-todo-v1/
â”œâ”€â”€ auth-service/         # Backend (Go)
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ main.go
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/             # Frontend (React + Vite)
â”‚   â”œâ”€â”€ Dockerfile.prod
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ ...
â”œâ”€â”€ nginx/                # Root Reverse Proxy
â”‚   â””â”€â”€ default.conf
â”œâ”€â”€ mongo-data/           # MongoDB persistent volume
â”œâ”€â”€ docker-compose.yml    # Main orchestration file
```

---

## 5ï¸âƒ£ Docker Compose Configuration

Create `docker-compose.yml` in project root:

```yaml
version: "3.9"

services:
  backend:
    build:
      context: ./auth-service
      dockerfile: Dockerfile
    container_name: backend
    environment:
      - MONGO_URL=mongodb://mongodb:27017/todo
      - JWT_SECRET=supersecret
    ports:
      - "10000:10000"
    networks:
      - app-network
    depends_on:
      - mongodb

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.prod
    container_name: frontend
    networks:
      - app-network

  nginx:
    image: nginx:alpine
    container_name: nginx
    volumes:
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf:ro
    ports:
      - "8080:80"
    depends_on:
      - backend
      - frontend
    networks:
      - app-network

  mongodb:
    image: mongo:7
    container_name: mongodb
    volumes:
      - ./mongo-data:/data/db
    ports:
      - "27017:27017"
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
```

---

## 6ï¸âƒ£ Nginx Reverse Proxy Configuration

Create `nginx/default.conf`:

```nginx
server {
    listen 80;

    server_name _;

    # Proxy API requests â†’ backend
    location /api/ {
        proxy_pass http://backend:10000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # Serve frontend (static build)
    location / {
        proxy_pass http://frontend:80;
    }
}
```

---

## 7ï¸âƒ£ Run the Application

```bash
cd ~/go-todo-v1

# Stop and clean old containers
docker-compose down -v

# Build and run in detached mode
docker-compose up -d --build
```

---

## 8ï¸âƒ£ Verify Deployment

Check running containers:

```bash
docker ps
```

You should see:

```
nginx, frontend, backend, mongodb
```

Open in browser (host machine, not VM):

```
http://192.168.121.220:8080
```

ğŸ¯ Use this IP for your screenshots.

---

## 9ï¸âƒ£ Notes for Production Hardening

* âœ… Use **env files** (`.env`) for secrets instead of hardcoding
* âœ… Configure **firewall (ufw)** to only allow necessary ports
* âœ… Setup **HTTPS** with Nginx + Certbot if deploying outside LAN
* âœ… Use **Docker volumes** for MongoDB data persistence (already included)
* âœ… Monitor containers with `docker logs` and `docker stats`

---

## âœ… Final Architecture

```
Host Browser
    â”‚
    â–¼
[ Nginx Reverse Proxy (8080) ]
    â”‚
 â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚         â”‚         â”‚
 â–¼         â–¼         â–¼
Frontend   Backend   MongoDB
(React)    (Go)      (Database)
```

---

ğŸ“Œ With this setup, your **Go-Todo Application** is fully production-ready inside a Linux VM.
LAN users can access it via `http://192.168.121.220:8080`.

---
---


